@model FormularioAsistencia.ViewModels.SolicitudCreateViewModel

@{
    ViewData["Title"] = "Create";
    int i = 0;
}

<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript">


        $(function () {
            // listen for changes on the checkboxes
            $('.chcktbl').change(function () {
                // have an empty array to store the values in
                storeVlaues();
            });

            $('#chckHead').click(function () {
                $(".chcktbl").prop('checked', $(this).prop("checked"));
                storeVlaues();
            });

            function storeVlaues() {
                var $form = $('form'), $button = $('.submit', $form);
                let values = [];



                // check each checked checkbox and store the value in array
                $.each($('.chcktbl:checked'), function () {
                    values.push($(this).val());
                    //if (values.length) {
                    //$button.prop('disabled', false);
                    //}
                    //else
                });
                // convert the array to string and store the value in hidden input field
                $('#hidden').val(values.toString());

                //alert($('#hidden').val());
            }
        });

        $(function () {

            var // Define maximum number of files.
                max_file_number = 3,
                // Define your form id or class or just tag.
                $form = $('form'),
                // Define your upload field class or id or tag.
                $file_upload = $('#archivos', $form),
                // Define your submit class or id or tag.
                $button = $('.submit', $form);

            // Disable submit button on page ready.
            $button.prop('disabled', 'disabled');

            $file_upload.on('change', function () {
                var number_of_images = $(this)[0].files.length;
                if (number_of_images > max_file_number) {
                    document.getElementById("spanArchivos").style.display = '';
                    $(this).val('');
                    $button.prop('disabled', 'disabled');
                } else {
                    document.getElementById("spanArchivos").style.display = 'none';
                    $button.prop('disabled', false);
                }
            });
        });

        $(function () {
            var // Define maximum number of files.
                // Define your form id or class or just tag.
                $form = $('form'),
                // Define your upload field class or id or tag.
                // Define your submit class or id or tag.
                $button = $('.submit', $form);

            $button.click(function (e) {
                alert("select any one");
                /*
            var number_of_checked_checkbox = $("input[name=q]:checked").length;
            if (number_of_checked_checkbox == 0) {
                alert("select any one");
            } else {
                $("#booking").submit();
            }
                */
            });
        });


    </script>
</head>


<div class="container" id="solicitud">
    <h1>Formulario De solicitud de Asistencia</h1>

    <h4>Por favor, rellene con sus datos personales.</h4>
    <hr />
    <form enctype="multipart/form-data" method="post">
        <div class="col-md-12">



            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row" style="margin-top:2%">

                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Apellido1" class="control-label">Primer Apellido:</label>
                        <input asp-for="Solicitud.Apellido1" class="form-control" />
                        <span asp-validation-for="Solicitud.Apellido1" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Apellido2" class="control-label">Segundo Apellido:</label>
                        <input asp-for="Solicitud.Apellido2" class="form-control" />
                        <span asp-validation-for="Solicitud.Apellido2" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Nombre" class="control-label">Nombre:</label>
                        <input asp-for="Solicitud.Nombre" class="form-control" />
                        <span asp-validation-for="Solicitud.Nombre" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Cedula" class="control-label">Cédula N°:</label>
                        <input asp-for="Solicitud.Cedula" class="form-control" />
                        <span asp-validation-for="Solicitud.Cedula" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Carne" class="control-label">N° Carné:</label>
                        <input asp-for="Solicitud.Carne" class="form-control" />
                        <span asp-validation-for="Solicitud.Carne" class="text-danger"></span>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Telefono1" class="control-label"> Teléfono 1:</label>
                        <input asp-for="Solicitud.Telefono1" class="form-control" />
                        <span asp-validation-for="Solicitud.Telefono1" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Telefono2" class="control-label"> Teléfono 2:</label>
                        <input asp-for="Solicitud.Telefono2" class="form-control" />
                        <span asp-validation-for="Solicitud.Telefono2" class="text-danger"></span>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label asp-for="Solicitud.CorreoSolicitante" class="control-label">Correo Electrónico:</label>
                        <input asp-for="Solicitud.CorreoSolicitante" class="form-control" value=@User.Identity.Name readonly />
                        <span asp-validation-for="Solicitud.CorreoSolicitante" class="text-danger"></span>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.CarreraQueCursa" class="control-label"> Carrera que cursa:</label>
                        <input asp-for="Solicitud.CarreraQueCursa" class="form-control" />
                        <span asp-validation-for="Solicitud.CarreraQueCursa" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label asp-for="Solicitud.Nivel" class="control-label">Nivel en que se encuentra:</label>
                        <input asp-for="Solicitud.Nivel" class="form-control" />
                        <span asp-validation-for="Solicitud.Nivel" class="text-danger"></span>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="form-group">
                        <label asp-for="Solicitud.NumeroDeCreditos" class="control-label">Nº de créditos matriculados en el ciclo que solicita colaborar:</label>
                        <input asp-for="Solicitud.NumeroDeCreditos" class="form-control" />
                        <span asp-validation-for="Solicitud.NumeroDeCreditos" class="text-danger"></span>
                    </div>
                </div>

            </div>


            <div class="row">


                <div class="col-md-6">
                    <div class="form-group">
                        <label asp-for="Solicitud.Promedio" class="control-label">Promedio Ponderado total actual:</label>
                        <input asp-for="Solicitud.Promedio" class="form-control" />
                        <span asp-validation-for="Solicitud.Promedio" class="text-danger"></span>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" value="cuenta" /> Tiene cuenta bancaria activa en OAF?
                        </label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="cuenta">
                        <div class="form-group">
                            <label asp-for="Solicitud.NumeroDeCuenta" class="control-label">Si no tiene cuenta en OAF, indique el N° de cuenta:</label>
                            <input asp-for="Solicitud.NumeroDeCuenta" class="form-control cuenta" />
                            <span asp-validation-for="Solicitud.NumeroDeCuenta" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Solicitud.Banco" class="control-label">Corresponde al siguiente banco:</label>
                            <select asp-for="Solicitud.Banco" class="form-control cuenta">
                                <option value="Banco Nacional">Banco Nacional</option>
                                <option value="BCR">BCR</option>
                                <option value="Popular">Popular</option>
                            </select>
                            <span asp-validation-for="Solicitud.Banco" class="text-danger"></span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">

                <div class="col-md-12">
                    <div class="form-group">
                        <label asp-for="archivos" class="control-label">
                            Archivos del estudiante(3)<br />
                            <h8 style="font-size: .8rem;">
                                Informe de matrícula<br />
                                Copia del expediente académico <br />
                                Copia de la cédula de identidad<br />
                            </h8>
                        </label>
                        <input multiple asp-for="archivos" class="form-control" id="archivos" type="file" />
                        <span asp-validation-for="archivos" class="text-danger" id="spanArchivos" style="display: none">No puede subir más de 3 archivos</span>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label> Asistencia o proyecto en el que desea colaborar:</label>
                        <span class="text-danger">@ViewBag.mensaje</span>
                        <ul>
                            @foreach (var item in Model.Asistencias_Disponibles)
                            {
                                <li>
                                    <input type="checkbox" class="chcktbl" value="@item.IdAsistencia" name="q" />
                                    <label for="@item.IdAsistencia">@item.Nombre</label>
                                </li>
                                i++;
                            }
                        </ul>
                        <input id="hidden" type="hidden" name="hidden" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" value="HA" /> Cuenta con horas <b>Asistente</b> en otra Unidad?
                        </label>
                    </div>

                    <div class="form-group">
                        <label asp-for="Solicitud.CantidadHA" class="control-label HA" style="display:none"> N° de horas asignadas:</label>
                        <input asp-for="Solicitud.CantidadHA" class="form-control HA" style="display:none" />
                        <span asp-validation-for="Solicitud.CantidadHA" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" value="HE" /> Cuenta con horas <b>Estudiante</b> en otra Unidad?
                        </label>
                    </div>

                    <div class="form-group">
                        <label asp-for="Solicitud.CantidadHE" class="control-label HE" style="display:none">N° de horas asignadas:</label>
                        <input asp-for="Solicitud.CantidadHE" class="form-control HE" style="display:none" />
                        <span asp-validation-for="Solicitud.CantidadHE" class="text-danger"></span>
                    </div>

                </div>
            </div>
            <center>
                <div class="form-group">
                    <input type="submit" value="Enviar Solicitud(es)" class="btn btn-rol" id="submit" style="width:50%;" />
                    @*Html.ActionLink("Create", "Create", "Solicitud", new { Model })*@
                </div>
            </center>
        </div>
    </form>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('input[type="checkbox"]').click(function () {
            var inputValue = $(this).attr("value");
            $("." + inputValue).val('');
            $("." + inputValue).toggle();
        });
    });
</script>
<script type="text/javascript">
    $(window).on('load', function () {
        $('#myModal').modal('show');
    });
</script>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

<div class="modal fade bootstrapmodal" data-backdrop="static"  id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header modal-reglamento">
                <div class="modal-title"><h2><i class="fa fa-exclamation-triangle " aria-hidden="true"></i> Aceptar Reglamento </h2></div>
                

            </div>
            <div class="modal-body modal-conteliminar">
                <h5>
                    Al presionar el botón de aceptar, está aceptando haber leído y entendido el reglamento oficial de la UCR para solicitar horas estudiantes/asistente.<br><br>
                    <a href="https://www.cu.ucr.ac.cr/uploads/tx_ucruniversitycouncildatabases/normative/horas_estudiante_asistente_posgrado.pdf">Pulse aqui para ver el reglamento.</a>
                    
                </h5>
            </div>
            <div class="modal-footer"> 
                <form method="post">
                    <button class="btn btn-rol" data-dismiss="modal">Aceptar</button>
                    <button class="btn btn-rol" asp-controller="Home" asp-action="">Cancelar</button>
                </form>
            </div>
        </div>
    </div>
</div>